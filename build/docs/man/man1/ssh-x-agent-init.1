.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "ssh-x-agent-init" "1" "" "Version Latest" "Start one agent instance only"
.hy
.SH NAME
.PP
\f[V]ssh-x-agent-init\f[R]: * start only one SSH agent instance (by
default SSH starts an agent by session) * and load keys protected or not
.SS EXAMPLE / USAGE
.PP
This is used in your \f[V].bashrc\f[R] or env loading script
.PP
2 env variables are needed.
* The location of the env file \f[V]SSHX_ENV\f[R] * The location of the
agent socket file \f[V]SSH_AUTH_SOCK\f[R]
.PP
For the key usage, see the add_keys function
.IP
.nf
\f[C]
export SSHX_ENV=\[dq]/home/admin\[dq]/.ssh/ssh-x-agent.env
export SSH_AUTH_SOCK=\[dq]/home/admin\[dq]/.ssh/agent.sock
export SSH_KEY_PASSPHRASE_MY_KEY=secret
ssh-x-agent-init
\f[R]
.fi
.SS SYNOPSIS
.SS KEY LOADING
.PP
This command will load keys that are: * non-protected * protected where
the passphrase is defined by env variables
.PP
\f[B]How it works?\f[R]
.PP
The function will loop through the environment variables with the
\f[V]SSH_KEY_PASSPHRASE\f[R] prefix.
.PP
Syntax:
.IP
.nf
\f[C]
export SSH_KEY_PASSPHRASE_KeyName=KeyPassphrase
\f[R]
.fi
.PP
Example: If the function finds the env
\f[V]SSH_KEY_PASSPHRASE_MY_KEY\f[R], it will: * load the key located at
\f[V]\[ti]/.ssh/my_key\f[R] * add it with the value of
\f[V]SSH_KEY_PASSPHRASE_MY_KEY\f[R] as passphrase
.SS REF
.IP \[bu] 2
Idea based on
auto-launching-ssh-agent-on-git-for-windows (https://docs.github.com/en/authentication/connecting-to-github-with-ssh/working-with-ssh-key-passphrases#auto-launching-ssh-agent-on-git-for-windows)
.IP \[bu] 2
Project with same functionality:
keychain (https://github.com/funtoo/keychain)
.SS ENV
.IP \[bu] 2
\f[V]SSH_X_AGENT_ENV\f[R]: the location where the env file is saved
(Default to \f[V]\[ti]/.ssh/ssh-x-agent.env\f[R])
.IP \[bu] 2
\f[V]SSH_X_KEY_HOME\f[R]: a path to the directory containing your
private keys.
Default to \f[V]\[ti]/.ssh\f[R]
