.\" Automatically generated by Pandoc 2.17.1.1
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "ssh-x-agent-init" "1" "" "Version Latest" "Start one agent instance only"
.hy
.SH NAME
.PP
\f[V]ssh-x-agent-init\f[R]: * start only one SSH agent instance (by
default SSH starts an agent by session) * and load keys protected or not
.SH USAGE: Start only one agent instance
.PP
This script is a wrapper around \f[V]ssh-agent -a\f[R]
.IP
.nf
\f[C]
# in place of
eval $(ssh-agent -a)
# you would use
eval $(ssh-agent-init)
\f[R]
.fi
.PP
You would place this script in a start script such as \f[V].bashrc\f[R].
.SH USAGE: Add your key
.PP
To load the protected key \f[V]id_my_key\f[R] automatically with the
passphrase \f[V]secret\f[R]
.IP
.nf
\f[C]
export SSH_KEY_PASSPHRASE_ID_MY_KEY=secret
eval $(ssh-agent-init)
\f[R]
.fi
.PP
For a detailed explanation on how it works, see the key loading section
.PP
In \f[V]Windows System Linux (WSL)\f[R], you need to add the env to the
\f[V]WSLENV\f[R]
.IP
.nf
\f[C]
WSLENV=SSH_KEY_PASSPHRASE_ID_MY_KEY
\f[R]
.fi
.SS SYNOPSIS
.IP
.nf
\f[C]
ssh-x-agent-init
\f[R]
.fi
.SS KEY LOADING
.PP
This command will load keys that are: * non-protected * protected where
the passphrase is defined by env variables
.PP
\f[B]How it works?\f[R]
.PP
The function will loop through the environment variables with the
\f[V]SSH_KEY_PASSPHRASE\f[R] prefix.
.PP
Syntax:
.IP
.nf
\f[C]
export SSH_KEY_PASSPHRASE_KeyName=KeyPassphrase
\f[R]
.fi
.PP
Example: If the function finds the env
\f[V]SSH_KEY_PASSPHRASE_MY_KEY\f[R], it will: * load the key located at
\f[V]\[ti]/.ssh/my_key\f[R] * add it with the value of
\f[V]SSH_KEY_PASSPHRASE_MY_KEY\f[R] as passphrase
.SS REF
.IP \[bu] 2
Idea based on
auto-launching-ssh-agent-on-git-for-windows (https://docs.github.com/en/authentication/connecting-to-github-with-ssh/working-with-ssh-key-passphrases#auto-launching-ssh-agent-on-git-for-windows)
.IP \[bu] 2
Project with same functionality:
keychain (https://github.com/funtoo/keychain)
.SS ENV
.IP \[bu] 2
\f[V]SSH_X_AGENT_ENV\f[R]: the location where the env file is saved
(Default to \f[V]\[ti]/.ssh/ssh-x-agent.env\f[R])
.IP \[bu] 2
\f[V]SSH_X_KEY_HOME\f[R]: a path to the directory containing your
private keys.
Default to \f[V]\[ti]/.ssh\f[R]
